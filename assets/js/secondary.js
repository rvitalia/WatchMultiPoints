!function(){"use strict";function e(){const e=document.querySelector("#basket");e.classList.contains("shop__basket--active")&&(basket.style.transform="translateX(100%)",setTimeout((function(){e.classList.remove("shop__basket--active")}),400))}function t(){const e=document.querySelector(".basket__pay");document.querySelector(".basket__summ").classList.add("basket__summ--active"),e.classList.add("basket__pay--active")}function s(){const e=document.querySelector("#basket__container"),t=e.querySelector("#basket__items"),s=document.querySelector(".basket__count__items");t.children.length>0?setTimeout((function(){const o=Array.from(t.querySelectorAll(".basket__items__item"));let c=[];o.forEach((t=>{let o={id:t.id,src:t.querySelector(".current__image").src,count:t.querySelector(".basket__item__count").innerText,priceOne:t.querySelector(".basket__items__item__summ").dataset.price,sumAll:parseInt(e.querySelector(".basket__summ__result").innerText),countIcon:s.innerText};c.push(o)})),localStorage.setItem("basketItem",JSON.stringify(c))}),100):localStorage.removeItem("basketItem")}function o(){const e=document.querySelector(".basket__summ__result"),s=document.querySelector("#basket__items"),o=Array.from(s.children),c=document.querySelector(".basket__pay"),n=document.querySelector(".basket__summ");s.children.length>0?(n.classList.remove("basket__summ--active"),c.classList.remove("basket__pay--active"),setTimeout((()=>{!function(){let t=0;o.forEach((e=>{let s=e.querySelector(".basket__item__count").innerText;const o=e.querySelector(".basket__items__item__summ").dataset.price;t+=s*o})),e.innerText=t+"₽"}()}),100),c.disabled=!1):(e.innerText=0,c.disabled=!0,t())}document.querySelector("#basket"),localStorage.getItem("basketItem")?JSON.parse(localStorage.getItem("basketItem")).forEach((e=>{!function(e){const t=basket.querySelector("#basket__items"),s=document.querySelector(".basket__count__items"),o=document.querySelector(".basket__summ__result"),c=document.querySelector(".basket__pay"),n=`\n        <div class="basket__items__item"  id="${e.id}">\n            <div class="basket__items__item__header">\n                <img class="current__image"  src="${e.src}" alt="">\n            </div>\n            <div class="basket__items__item__calculation">\n                <span class="basket__item__minus" onclick="" data-operation="minus">-</span>\n                <span class="basket__item__count">${e.count}</span>\n                <span class="basket__item__plus" onclick="" data-operation="plus">+</span>\n            </div>\n            <div class="basket__items__item__summ" data-price = "${e.priceOne}">\n                \x3c!--<span> ₽</span>--\x3e\n            </div>\n        </div>\n        `;t.insertAdjacentHTML("beforeend",n),o.innerText=e.sumAll+"₽",s.innerText=e.countIcon,e.sumAll>0&&(c.disabled=!1)}(e)})):t(),document.querySelector("#all__watch"),window.addEventListener("click",(t=>{if("basket__logo"===t.target.id)!function(){const e=document.querySelector("#basket");e.classList.contains("shop__basket--active")||(e.classList.add("shop__basket--active"),setTimeout((function(){basket.style.transform="translateX(0)"}),400))}();else if("basket__close"===t.target.id)e();else if("minus"==t.target.dataset.operation){const c=t.target.closest(".basket__items__item__calculation");c.querySelector(".basket__item__count").innerText>1?(c.querySelector(".basket__item__count").innerText--,o(),s()):(t.target.closest(".basket__items__item").remove(),function(){const t=document.querySelector("#basket__items").children.length,s=document.querySelector(".basket__count__items");t>0?s.innerText=t:(s.innerText="",e())}(),o(),s())}else"plus"==t.target.dataset.operation?(t.target.closest(".basket__items__item__calculation").querySelector(".basket__item__count").innerText++,o(),s()):t.target===document.querySelector(".basket__pay")?(function(){const t=document.querySelector("#modalForm"),s=(document.querySelector("#modalForm__btn"),document.querySelector("body"));t.classList.add("modalForm--active"),s.classList.add("no-scroll"),e(),setTimeout((()=>{t.style.transform="rotateX(0)"}),200)}(),setTimeout((()=>{const e=document.querySelectorAll(".basket__items__item"),t=document.querySelector(".basket__summ__result");let s=[],o=[];e.forEach(((e,o)=>{const c={id:e.id,img:e.querySelector(".current__image").src,count:e.querySelector(".basket__item__count").innerText,summ:t.innerText};s[o]=c}));const c=document.querySelector(".modalForm__list");c.innerHTML="",s.forEach((e=>{const t=`\n            <div class="modalForm__list__item" data-id = "${e.id}">\n                <div class="modalForm__list__watch">\n                    <img src="${e.img}" alt="" class="modalForm__list__watch">\n                </div>\n                <div class="modalForm__list__countOrders">${e.count} шт.</div>\n            </div>`;c.insertAdjacentHTML("beforeend",t);const s=["id - часов : "+e.id,e.img.split("/").pop(),"количество - "+e.count,"сумма -"+e.summ];o+=s}));let n=s.length-1;function r(){const e=`<div class="modalForm__list__orderSumm">Итого : ${s[n].summ}</div>`;c.insertAdjacentHTML("afterend",e)}document.querySelector(".modalForm__list__orderSumm")?(document.querySelector(".modalForm__list__orderSumm").innerHTML="",r()):r();const a=document.querySelector(".input__order");a.value=o,console.log(a.value)}),100)):t.target===document.querySelector("#modalForm__close")?function(){const e=document.querySelector("#modalForm"),t=(document.querySelector("#modalForm__close"),document.querySelector("body"));e.style.transform="rotateX(90deg)",setTimeout((()=>{e.classList.remove("modalForm--active"),t.classList.remove("no-scroll")}),200)}():(t.target,document.querySelector("#modalForm__btn"))})),function(){const e=document.querySelector("#basket");window.addEventListener("scroll",(()=>{e.classList.contains("shop__basket--active")&&(e.style.height="100vh")}))}()}();